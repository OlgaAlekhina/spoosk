{% load custom_filters %}
{% load static %}

    <div class="wrapper reviews-wrapper">
        {% if reviews %}
        <div class="cards-wrapper">
            <h2 class="section-title section-title-reviews">Последние отзывы</h2>
        </div>
        <div class="swiper mySwiper container reviews-content">
                <div class="swiper-wrapper content">
                    {% for review in reviews %}
                        <div class="swiper-slide review-column">
                            <div class="review-item">
                                    <div class="review-content">

                                        <img class="img-foto" src={{ review.resort.image.url }} width="180" height="180">

                                        <div class="review-content-text">
                                            <div class="review-author-name">
                                                {% if review.author.first_name %}
                                                    {{ review.author.first_name|capfirst }}
                                                    {% if review.author.last_name %}
                                                        {{ review.author.last_name.0|capfirst }}.
                                                    {% endif %}
                                                {% else %}
                                                    @{{ review.author.userprofile.name }}
                                                {% endif %}
                                            </div>
                                            <div class="review-author-date">{{ review.add_at|date:"d.m.Y"}}</div>
                                            <a href="{{ review.resort.get_absolute_url }}"><h3 class="review-resort-name">{{ review.resort.name }}</h3></a>
                                            <span class="review-author-date">{{ review.resort.region }}</span>
                                            <ul class="stars-list">
                                                {% for i in review.rating|create_range %}
                                                    <li class="stars-item">
                                                        <img src="{% static 'image/reviews/reviews_rating.svg' %}" alt="желтая звезда">
                                                    </li>
                                                {% endfor %}

                                                {% for i in review.rating|create_range_difference %}
                                                    <li class="stars-item">
                                                        <img src="{% static 'image/reviews/reviews_rating_grey.svg' %}" alt="серая звезда">
                                                    </li>
                                                {% endfor %}

                                            </ul>
                                        </div>

                                    </div>

                                    <div class="review-text">
                                        <div class="review-title">Отзыв:</div>
                                        <div class="review-title-text">
                                            <p>{{ review.text|truncatechars:150 }}</p>
                                        </div>
                                    </div>


                                    <a class="btn-reviews" href="#" id="open-modal-review-full" onclick="reviewData('{{ review.id }}')">Подробнее</a>
                                </div>

                        </div>
                    {% endfor %}
                </div>
        </div>
        <img  class="swiper-button-next" src="{% static 'image/reviews/chevron_right.svg' %}" alt="">
        <img  class="swiper-button-prev" src="{% static 'image/reviews/chevron_left.svg' %}" alt="">
        <div class="swiper-pagination"></div>
        {% endif %}
    </div>

    <div class="modal" id="modal-review-full">
        <div class="form-register__box">
            <button class="modal__close-btn">
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M1.71507 0.280712C1.52693 0.0985542 1.27495 -0.00224062
                        1.0134 3.78025e-05C0.751843 0.00231622 0.501645 0.107485 0.316692 0.292894C0.131738 0.478302 0.0268265
                        0.729114 0.0245536 0.991311C0.0222808 1.25351 0.122829 1.50611 0.30454 1.69471L5.58457 6.98771L0.30454
                        12.2807C0.209264 12.373 0.133268 12.4833 0.0809879 12.6053C0.0287073 12.7273 0.00118865 12.8585 3.76645e-05
                        12.9913C-0.00111332 13.1241 0.0241262 13.2558 0.0742838 13.3787C0.124441 13.5016 0.198513 13.6132 0.292175
                        13.7071C0.385838 13.801 0.497216 13.8753 0.619811 13.9255C0.742406 13.9758 0.873763 14.0011 1.00622 14C1.13867
                        13.9988 1.26957 13.9712 1.39127 13.9188C1.51298 13.8664 1.62305 13.7902 1.71507 13.6947L6.9951 8.40171L12.2751
                        13.6947C12.4633 13.8769 12.7153 13.9777 12.9768 13.9754C13.2384 13.9731 13.4886 13.8679 13.6735 13.6825C13.8585
                        13.4971 13.9634 13.2463 13.9657 12.9841C13.9679 12.7219 13.8674 12.4693 13.6857 12.2807L8.40564 6.98771L13.6857
                        1.69471C13.8674 1.50611 13.9679 1.25351 13.9657 0.991311C13.9634 0.729114 13.8585 0.478302 13.6735 0.292894C13.4886
                        0.107485 13.2384 0.00231622 12.9768 3.78025e-05C12.7153 -0.00224062 12.4633 0.0985542 12.2751 0.280712L6.9951 5.57371L1.71507
                        0.280712Z" fill="#2C2D2E"/>
                </svg>
            </button>
            <div class="form-container form-container-small">
                <h1 class="form-title">Полный отзыв</h1>
            </div>
        </div>
    </div>


<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

	<!-- Initialize Swiper -->
<script>
    var swiper = new Swiper(".mySwiper", {
        slidesPerView: 2,
        spaceBetween: 80,
        slidesPerGroup: 2,
        loop: false,
        loopFillGroupWithBlank: true,
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        },
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });
</script>



